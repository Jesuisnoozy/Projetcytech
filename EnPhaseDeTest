#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <time.h>
#include <errno.h>
#define NAMESIZE 21
typedef struct{
     char *name;
     int damage, focusdamage, heal, focusheal, effect, poison, stun, confused;
} Attack;

typedef struct{
     char *name;
     int defence, agility, hp, stamina, poison, stun, confused, pv;
     Attack normal, special, unique;
} Bot;


Attack Attackbuilder(int num){
    Attack att;
    switch(num){
        case 1:
          att.damage=0;
          att.focusdamage=50;
          att.heal=0;
          att.focusheal=0;
          att.effect=0;
          att.name=malloc(sizeof(char)*12);
          if(att.name==NULL){ exit(1); }
          strcpy(att.name , "Coup Simple");
          break;
        case 2:
          att.damage=0;
          att.focusdamage=50;
          att.heal=0;
          att.focusheal=0;
          att.effect=0;
          att.name=malloc(sizeof(char)*12);
          if(att.name==NULL){ exit(1); }
          strcpy(att.name, "Coup double");
          break;
        case 3:
          att.damage=0;
          att.focusdamage=50;
          att.heal=0;
          att.focusheal=0;
          att.effect=0;
          att.name=malloc(sizeof(char)*12);
          if(att.name==NULL){ exit(1); }
          strcpy(att.name, "Coup triple");
          break;
        default:
            printf("ERREUR: Mauvais numéro saisie pour le switchcase Attackbuilder\n");
            exit(1);
    }
   return att; 
}
     
Bot Builder(int defen, int agil, int health, int norm, int spec, int uniq){
     Bot a;
     a.defence=defen;
     a.agility=agil;
     a.hp=health;
     a.normal=Attackbuilder(norm);
     a.special=Attackbuilder(spec);
     a.unique=Attackbuilder(uniq);
     a.pv=health;
     a.poison=0; 
     a.stun=0; 
     a.confused=0;
     a.stamina=5;
     return a;
}

Bot Characterbuilder(int num){
    Bot a;
    switch(num){
            //(défence, agilité, points de vie, att normale, att spéciale, att unique)
        case 1000:
            a=Builder(5, 50, 150, 1, 2, 3);
            a.name=malloc(sizeof(char)*5);
            if(a.name==NULL){ exit(1); }
            strcpy(a.name, "Test");
            break;
        default:
            printf("ERREUR: Mauvais numéro saisie pour le switchcase Characterbuilder\n");
            exit(1);
    }
   return a; 
}

int main(){
    Bot a=Characterbuilder(1000);
    
    for(int i=0; i<strlen(a.name); i++){
        printf("%c", *(a.name+i));
    }
    printf("\n%d\n",a.pv);
    
    for(int i=0; i<strlen(a.normal.name); i++){
        printf("%c", *(a.normal.name+i));
    }
    printf("\n%d\n",a.special.focusdamage);
    
 return 0;   
}
